{"ast":null,"code":"import _regeneratorRuntime from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/mnt/z/work/ibet-django/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/mnt/z/work/ibet-django/front-end/src/components/login.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { errors } from './errors';\nimport { authLogin, authCheckState, AUTH_RESULT_SUCCESS, FacebookSignup, FacebookauthLogin } from '../actions';\nimport IoEye from 'react-icons/lib/io/eye';\nimport FacebookLogin from \"react-facebook-login\";\nimport axios from 'axios';\nimport IoSocialFacebook from 'react-icons/lib/io/social-facebook';\nimport '../css/login.css';\nvar API_URL = process.env.REACT_APP_REST_API;\nvar height = window.innerHeight;\nvar width = window.innerWidth;\nexport var Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.componentClicked = function () {\n      _this.setState({\n        button_clicked: 1\n      });\n\n      var username = _this.state.name;\n      var email = _this.state.email;\n      console.log(username, email);\n\n      _this.props.FacebookauthLogin(username, email).then(function (res) {\n        _this.props.history.push('/');\n      }).catch(function (err) {\n        _this.props.FacebookSignup(username, email).then(function (res) {\n          _this.props.FacebookauthLogin(username, email).then(function (res) {\n            _this.props.history.push('/');\n          }).catch(function (err) {});\n        }).catch(function (err) {});\n      });\n    };\n\n    _this.FacebookFailed = function () {\n      console.log('Facebook Login cancelled');\n    };\n\n    _this.responseFacebook = function (response) {\n      //console.log(response);\n      localStorage.setItem('facebook', true);\n      var facebookObj = {\n        userID: response.userID,\n        name: response.name,\n        email: response.email,\n        picture: response.picture.data.url\n      };\n\n      _this.setState({\n        name: response.name,\n        email: response.email\n      });\n\n      localStorage.setItem('facebookObj', JSON.stringify(facebookObj));\n      var username = _this.state.name;\n      var email = _this.state.email;\n\n      if (_this.state.button_clicked === 1) {\n        _this.props.FacebookauthLogin(username, email).then(function (res) {\n          _this.props.history.push('/');\n        }).catch(function (err) {\n          _this.props.FacebookSignup(username, email).then(function (res) {\n            _this.props.FacebookauthLogin(username, email).then(function (res) {\n              _this.props.history.push('/');\n            }).catch(function (err) {});\n          }).catch(function (err) {});\n        });\n      }\n    };\n\n    _this.onInputChange_checkbox =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.setState({\n                  check: !_this.state.check\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      errorCode: '',\n      username: '',\n      password: '',\n      hidden: true,\n      name: '',\n      email: '',\n      button_clicked: 0,\n      check: false,\n      live_check_username: false,\n      live_check_password: false,\n      button_disable: true,\n      button_type: 'login-button-disable'\n    };\n    _this.onInputChange_username = _this.onInputChange_username.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onInputChange_password = _this.onInputChange_password.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormSubmit = _this.onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggleShow = _this.toggleShow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handle_one_click = _this.handle_one_click.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var remember_check, check, username, password, _remember_check, _username, _password;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.props.authCheckState().then(function (res) {\n                  if (res === AUTH_RESULT_SUCCESS) {\n                    _this2.props.history.push('/');\n                  }\n                });\n                remember_check = localStorage.getItem('remember_check');\n\n                if (!remember_check) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 5;\n                return this.setState({\n                  check: true\n                });\n\n              case 5:\n                check = localStorage.getItem('one-click');\n\n                if (check) {\n                  username = localStorage.getItem('username');\n                  password = localStorage.getItem('password');\n                  localStorage.removeItem('one-click');\n                  localStorage.removeItem('username');\n                  localStorage.removeItem('password');\n                  this.setState({\n                    username: username,\n                    password: password,\n                    button_disable: false,\n                    button_type: 'login-button'\n                  });\n                } else {\n                  _remember_check = localStorage.getItem('remember_check');\n\n                  if (_remember_check) {\n                    _username = localStorage.getItem('remember_username');\n                    _password = localStorage.getItem('remember_password');\n                    this.setState({\n                      username: _username,\n                      password: _password,\n                      button_disable: false,\n                      button_type: 'login-button'\n                    });\n                  }\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"handle_one_click\",\n    value: function handle_one_click() {\n      var _this3 = this;\n\n      axios.post(API_URL + 'users/api/oneclicksignup/').then(function (res) {\n        var formatMessage = _this3.props.intl.formatMessage;\n        var message_username = formatMessage({\n          id: \"login.username\"\n        });\n        var message_password = formatMessage({\n          id: \"login.password\"\n        });\n        var temp = res.data.split('-');\n        var username = temp[0];\n        var password = temp[1];\n\n        _this3.setState({\n          username: username,\n          password: password,\n          button_disable: false,\n          button_type: 'login-button',\n          check: false\n        });\n\n        localStorage.removeItem('remember_username');\n        localStorage.removeItem('remember_password');\n        localStorage.removeItem('remember_check');\n        alert(message_username + username + '  ' + message_password + password);\n      });\n    }\n  }, {\n    key: \"onInputChange_username\",\n    value: function onInputChange_username(event) {\n      if (event.target.value && this.state.password) {\n        this.setState({\n          button_disable: false,\n          button_type: 'login-button'\n        });\n      } else {\n        this.setState({\n          button_disable: true,\n          button_type: 'login-button-disable'\n        });\n      }\n\n      this.setState({\n        username: event.target.value\n      });\n    }\n  }, {\n    key: \"onInputChange_password\",\n    value: function onInputChange_password(event) {\n      if (event.target.value && this.state.username) {\n        this.setState({\n          button_disable: false,\n          button_type: 'login-button'\n        });\n      } else {\n        this.setState({\n          button_disable: true,\n          button_type: 'login-button-disable'\n        });\n      }\n\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }, {\n    key: \"toggleShow\",\n    value: function toggleShow() {\n      this.setState({\n        hidden: !this.state.hidden\n      });\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(event) {\n      var _this4 = this;\n\n      event.preventDefault();\n\n      if (!this.state.username) {\n        this.setState({\n          errorCode: errors.USERNAME_EMPTY_ERROR\n        });\n      } else if (!this.state.password) {\n        this.setState({\n          errorCode: errors.PASSWORD_EMPTY_ERROR\n        });\n      } else {\n        this.props.authLogin(this.state.username, this.state.password).then(function () {\n          if (_this4.state.check) {\n            localStorage.setItem('remember_username', _this4.state.username);\n            localStorage.setItem('remember_password', _this4.state.password);\n            localStorage.setItem('remember_check', 'checked');\n          } else {\n            localStorage.removeItem('remember_username');\n            localStorage.removeItem('remember_password');\n            localStorage.removeItem('remember_check');\n          }\n\n          _this4.props.history.push('/');\n        }).catch(function (err) {\n          _this4.setState({\n            errorCode: err\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var showErrors = function showErrors() {\n        if (_this5.state.errorCode === errors.USERNAME_EMPTY_ERROR) {\n          return React.createElement(\"div\", {\n            style: {\n              color: 'red'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230\n            },\n            __self: this\n          }, React.createElement(FormattedMessage, {\n            id: \"login.username_empty_error\",\n            defaultMessage: \"Username cannot be empty\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231\n            },\n            __self: this\n          }));\n        } else if (_this5.state.errorCode === errors.PASSWORD_EMPTY_ERROR) {\n          return React.createElement(\"div\", {\n            style: {\n              color: 'red'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236\n            },\n            __self: this\n          }, React.createElement(FormattedMessage, {\n            id: \"login.password_empty_error\",\n            defaultMessage: \"Password cannot be empty\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237\n            },\n            __self: this\n          }));\n        } else {\n          return React.createElement(\"div\", {\n            style: {\n              color: 'red'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          }, \" \", _this5.state.errorCode, \" \");\n        }\n      };\n\n      return React.createElement(\"div\", {\n        className: \"login-form \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"nav.login\",\n        defaultMessage: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        onSubmit: this.onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.username\",\n        defaultMessage: \"Username: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        placeholder: \"claymore\",\n        className: \"form-control\",\n        value: this.state.username,\n        onChange: this.onInputChange_username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }), React.createElement(FormattedMessage, {\n        id: \"login.password\",\n        defaultMessage: \"Password: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: this.state.hidden ? \"password\" : \"text\",\n        placeholder: \"password\",\n        className: \"form-control\",\n        value: this.state.password,\n        onChange: this.onInputChange_password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        style: {\n          position: 'relative',\n          left: '-25px'\n        },\n        onMouseDown: this.toggleShow,\n        onMouseUp: this.toggleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \" \", React.createElement(IoEye, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), \" \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        disabled: this.state.button_disable,\n        className: this.state.button_type,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.login\",\n        defaultMessage: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.remember\",\n        defaultMessage: \"Remember Password \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: this.state.check,\n        onChange: this.onInputChange_checkbox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"or\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.or\",\n        defaultMessage: \"Or\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"submit-button\",\n        onClick: function onClick() {\n          _this5.props.history.push('/signup/');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.signup\",\n        defaultMessage: \"Signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"forget\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/forget_password\",\n        style: {\n          textDecoration: 'none',\n          color: 'blue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.forget_password\",\n        defaultMessage: \"Forgot Password?\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      })))), React.createElement(FormattedMessage, {\n        id: \"login.one-click\",\n        defaultMessage: \"Or try one click signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          marginLeft: width * 0.02\n        },\n        onClick: this.handle_one_click,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.signup\",\n        defaultMessage: \"Signup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          marginLeft: width * 0.05,\n          marginTop: height * 0.01\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.option\",\n        defaultMessage: \"Or login with\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      })), React.createElement(FacebookLogin, {\n        appId: \"236001567251034\",\n        size: \"small\",\n        textButton: \"\",\n        fields: \"name, email, picture\",\n        onClick: this.componentClicked,\n        callback: this.responseFacebook,\n        onFailure: this.FacebookFailed,\n        icon: React.createElement(\"div\", {\n          style: {\n            fontSize: '25px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348\n          },\n          __self: this\n        }, React.createElement(IoSocialFacebook, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"back\",\n        onClick: function onClick() {\n          _this5.props.history.push('/');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"login.back\",\n        defaultMessage: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), showErrors());\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var token = state.auth.token;\n  return {\n    isAuthenticated: token !== null && token !== undefined,\n    loading: state.auth.loading,\n    error: state.auth.error\n  };\n};\n\nexport default injectIntl(connect(mapStateToProps, {\n  authLogin: authLogin,\n  authCheckState: authCheckState,\n  FacebookSignup: FacebookSignup,\n  FacebookauthLogin: FacebookauthLogin\n})(Login));","map":{"version":3,"sources":["/mnt/z/work/ibet-django/front-end/src/components/login.js"],"names":["React","connect","NavLink","FormattedMessage","injectIntl","errors","authLogin","authCheckState","AUTH_RESULT_SUCCESS","FacebookSignup","FacebookauthLogin","IoEye","FacebookLogin","axios","IoSocialFacebook","API_URL","process","env","REACT_APP_REST_API","height","window","innerHeight","width","innerWidth","Login","props","componentClicked","setState","button_clicked","username","state","name","email","console","log","then","res","history","push","catch","err","FacebookFailed","responseFacebook","response","localStorage","setItem","facebookObj","userID","picture","data","url","JSON","stringify","onInputChange_checkbox","event","check","errorCode","password","hidden","live_check_username","live_check_password","button_disable","button_type","onInputChange_username","bind","onInputChange_password","onFormSubmit","toggleShow","handle_one_click","remember_check","getItem","removeItem","post","formatMessage","intl","message_username","id","message_password","temp","split","alert","target","value","preventDefault","USERNAME_EMPTY_ERROR","PASSWORD_EMPTY_ERROR","showErrors","color","position","left","textDecoration","marginLeft","marginTop","fontSize","Component","mapStateToProps","token","auth","isAuthenticated","undefined","loading","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { FormattedMessage, injectIntl} from 'react-intl';\nimport { errors } from './errors';\nimport { authLogin, authCheckState, AUTH_RESULT_SUCCESS, FacebookSignup, FacebookauthLogin } from '../actions';\nimport IoEye from 'react-icons/lib/io/eye';\nimport FacebookLogin from \"react-facebook-login\";\nimport axios from 'axios';\nimport IoSocialFacebook from 'react-icons/lib/io/social-facebook';\nimport '../css/login.css';\n\n\nconst API_URL = process.env.REACT_APP_REST_API;\n\nvar height = window.innerHeight\nvar width = window.innerWidth\n\nexport class Login extends React.Component {\n\n    constructor(props){\n        super(props);\n    \n        this.state = {\n          errorCode: '',\n          username: '',\n          password: '',\n          hidden: true,\n\n          name: '',\n          email: '',\n          button_clicked: 0,\n          check: false,\n\n          live_check_username: false,\n          live_check_password: false,\n          button_disable: true,\n          button_type: 'login-button-disable'\n        };\n    \n        this.onInputChange_username         = this.onInputChange_username.bind(this);\n        this.onInputChange_password         = this.onInputChange_password.bind(this)\n        this.onFormSubmit                   = this.onFormSubmit.bind(this);\n        this.toggleShow                     = this.toggleShow.bind(this);\n        this.handle_one_click               = this.handle_one_click.bind(this);\n    }\n\n  async componentDidMount() {\n    this.props.authCheckState()\n    .then(res => {\n      if (res === AUTH_RESULT_SUCCESS) {\n        this.props.history.push('/'); \n      } \n    });\n\n    const remember_check = localStorage.getItem('remember_check');\n    if (remember_check){\n        await this.setState({check: true})\n    }\n\n    const check = localStorage.getItem('one-click');\n    if (check){\n        const username = localStorage.getItem('username');\n        const password = localStorage.getItem('password');\n        localStorage.removeItem('one-click');\n        localStorage.removeItem('username');\n        localStorage.removeItem('password');\n        this.setState({username: username, password: password, button_disable: false, button_type: 'login-button' })\n    }else{\n        const remember_check = localStorage.getItem('remember_check');\n        if (remember_check){\n            const username = localStorage.getItem('remember_username');\n            const password = localStorage.getItem('remember_password');\n            this.setState({username: username, password: password, button_disable: false, button_type: 'login-button' })\n        }\n    }\n  }\n\n  handle_one_click(){\n    axios.post(API_URL + 'users/api/oneclicksignup/')\n    .then(res => {\n        const { formatMessage } = this.props.intl;\n        const message_username = formatMessage({ id: \"login.username\" });\n\n        const message_password = formatMessage({ id: \"login.password\" });\n\n        var temp = res.data.split('-')\n        var username = temp[0]\n        var password = temp[1]\n        this.setState({username: username, password: password, button_disable: false, button_type: 'login-button', check: false})\n\n        localStorage.removeItem('remember_username');\n        localStorage.removeItem('remember_password');\n        localStorage.removeItem('remember_check');\n\n        alert(message_username + username + '  ' + message_password + password)\n    })\n  }\n\n  onInputChange_username(event){\n    if(event.target.value && this.state.password){\n        this.setState({button_disable: false, button_type: 'login-button'})\n    }else{\n        this.setState({button_disable: true, button_type: 'login-button-disable'})\n    }\n    this.setState({username: event.target.value});\n  }\n\n  onInputChange_password(event){\n    if(event.target.value && this.state.username){\n        this.setState({button_disable: false, button_type: 'login-button'})\n    }else{\n        this.setState({button_disable: true, button_type: 'login-button-disable'})\n    }\n    this.setState({password: event.target.value});\n  }\n\n  toggleShow() {\n    this.setState({ hidden: !this.state.hidden });\n  }\n\n  componentClicked = () => {\n    this.setState({button_clicked: 1})\n    var username = this.state.name\n    var email = this.state.email\n    console.log(username, email)\n\n    this.props.FacebookauthLogin(username, email)\n    .then(res => {\n        this.props.history.push('/');\n    }).catch(err => {\n        this.props.FacebookSignup(username, email)\n        .then(res => {\n            this.props.FacebookauthLogin(username, email)\n            .then(res => {\n                this.props.history.push('/');\n            })\n            .catch(err => {\n            })\n        })\n        .catch(err => {\n        })\n    })\n  }\n\n  FacebookFailed = () => {\n      console.log('Facebook Login cancelled')\n  }\n\n  responseFacebook = (response) => {\n    //console.log(response);\n    \n    localStorage.setItem('facebook', true)\n\n    var facebookObj = {\n        userID:  response.userID,\n        name:    response.name,\n        email:   response.email,\n        picture: response.picture.data.url\n    }\n\n    this.setState({\n      name:  response.name,\n      email: response.email\n    })\n\n    localStorage.setItem('facebookObj', JSON.stringify(facebookObj));\n\n    var username = this.state.name\n    var email = this.state.email\n    \n    if (this.state.button_clicked === 1){\n        this.props.FacebookauthLogin(username, email)\n        .then(res => {\n            this.props.history.push('/');\n        }).catch(err => {\n            this.props.FacebookSignup(username, email)\n            .then(res => {\n                this.props.FacebookauthLogin(username, email)\n                .then(res => {\n                    this.props.history.push('/');\n                })\n                .catch(err => {\n                })\n            })\n            .catch(err => {\n            })\n        })\n    }\n  };\n\n  onInputChange_checkbox = async (event) => {\n    \n     await this.setState({check: !this.state.check})\n\n  }\n\n  onFormSubmit(event){\n    event.preventDefault();\n\n    if (!this.state.username){\n        this.setState({ errorCode: errors.USERNAME_EMPTY_ERROR });\n    }else if(!this.state.password){\n        this.setState({ errorCode: errors.PASSWORD_EMPTY_ERROR });\n    }else{\n        this.props.authLogin(this.state.username, this.state.password)\n        .then(() => {\n            if (this.state.check){\n                localStorage.setItem('remember_username', this.state.username);\n                localStorage.setItem('remember_password', this.state.password);\n                localStorage.setItem('remember_check', 'checked')\n            }else{\n                localStorage.removeItem('remember_username');\n                localStorage.removeItem('remember_password');\n                localStorage.removeItem('remember_check');\n            }\n            this.props.history.push('/');\n        })\n        .catch(err => {\n            this.setState({errorCode: err});\n        });\n    }\n  }\n\n  render() {\n\n    const showErrors = () => {\n      if (this.state.errorCode === errors.USERNAME_EMPTY_ERROR) {\n          return (\n              <div style={{color: 'red'}}> \n                  <FormattedMessage id=\"login.username_empty_error\" defaultMessage='Username cannot be empty' /> \n              </div>\n          );\n      } else if (this.state.errorCode === errors.PASSWORD_EMPTY_ERROR) {\n          return (\n              <div style={{color: 'red'}}> \n                  <FormattedMessage id=\"login.password_empty_error\" defaultMessage='Password cannot be empty' /> \n              </div>\n          );\n      } else {\n        return (\n            <div style={{color: 'red'}}> {this.state.errorCode} </div>\n        )\n      }\n    }\n    \n    return (\n        <div className='login-form '>\n\n            <div className='title'> \n                <FormattedMessage id=\"nav.login\" defaultMessage='Login' />\n            </div>\n\n            <form onSubmit={this.onFormSubmit} >\n                \n                <FormattedMessage id=\"login.username\" defaultMessage='Username: ' />\n                \n                <br/>\n\n                <input\n                    placeholder=\"claymore\"\n                    className=\"form-control\"\n                    value={this.state.username}\n                    onChange={this.onInputChange_username}\n                />\n\n                <br/>\n\n                <FormattedMessage id=\"login.password\" defaultMessage='Password: ' />  \n \n                <br/>\n\n                <input\n                    \n                    type = {this.state.hidden ? \"password\" : \"text\"}\n                    placeholder=\"password\"\n                    className=\"form-control\"\n                    value={this.state.password}\n                    onChange={this.onInputChange_password}\n                />\n\n\n                <span style ={{position: 'relative',  left: '-25px'}} onMouseDown={this.toggleShow} onMouseUp={this.toggleShow}> <IoEye /> </span>\n \n                <br/>\n\n                <button disabled = {this.state.button_disable} className={this.state.button_type} type=\"submit\" > \n                    <FormattedMessage id=\"login.login\" defaultMessage='Login' />\n                </button>\n                \n                <br />\n\n                <div>\n\n                    <FormattedMessage id=\"login.remember\" defaultMessage='Remember Password ' />    \n\n                    <input\n                      type=\"checkbox\"\n                      checked={this.state.check}\n                      onChange={this.onInputChange_checkbox} \n                    />\n\n                </div>\n\n                <div className='or'> \n                    <FormattedMessage id=\"login.or\" defaultMessage='Or' /> \n                </div>\n\n       \n                <button className=\"submit-button\" onClick={ () => {this.props.history.push('/signup/')}}>\n                    <FormattedMessage id=\"login.signup\" defaultMessage='Signup' />\n                </button>\n\n                <br/>\n\n\n                <div className='forget'> \n                    <NavLink to='/forget_password' style={{ textDecoration: 'none', color: 'blue' }}>\n                        <FormattedMessage id=\"login.forget_password\" defaultMessage='Forgot Password?' /> \n                    </NavLink>\n                </div>\n\n\n            </form>\n\n            <FormattedMessage id=\"login.one-click\" defaultMessage='Or try one click signup' />\n\n            <button style={{marginLeft: width * 0.02}} onClick={this.handle_one_click}>\n                <FormattedMessage id=\"login.signup\" defaultMessage='Signup' />\n            </button>\n\n\n            <br/>\n\n            <div style={{marginLeft: width * 0.05, marginTop: height * 0.01}}>\n                <FormattedMessage id=\"login.option\" defaultMessage='Or login with' />\n            </div>\n\n            <FacebookLogin\n                appId=\"236001567251034\"\n                size = 'small'\n                textButton=\"\"\n                fields=\"name, email, picture\"\n                onClick={this.componentClicked}\n                callback={this.responseFacebook}\n                onFailure={this.FacebookFailed}\n                icon ={ \n                    <div style={{fontSize: '25px'}}> \n                        <IoSocialFacebook />\n                    </div>\n                }\n            />\n\n            <br/>\n\n            <button className=\"back\" onClick={ () => {this.props.history.push('/')}}>\n                <FormattedMessage id=\"login.back\" defaultMessage='Back' />\n            </button>\n\n            <br/>\n            {\n                showErrors()\n            }\n    </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n    const { token } = state.auth;\n    return {\n        isAuthenticated: token !== null && token !== undefined,\n        loading: state.auth.loading,\n        error: state.auth.error,\n    }\n}\n\nexport default injectIntl(connect(mapStateToProps, {authLogin, authCheckState, FacebookSignup, FacebookauthLogin})(Login));"]},"metadata":{},"sourceType":"module"}