{% extends "xadmin/base_site.html" %}
{% load staticfiles%}

{% block content-nav %}
{% endblock %}

{% block content %}

<!-- <div class="panel panel-default">
    <div class="panel-heading">
        <h2 class="panel-title">
            Deposit Channels
        </h2>
    </div>
    <div class="panel-body">
        <table id="deposit_channels" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>CHANNEL</th>
                    <th>MIN DEPOSIT</th>
                    <th>MAX DEPOSIT</th>
                    <th>FEE</th>
                    <th>VOLUME</th>
                    <th>NEW USERS VOLUMN</th>
                    <th>BLOCKED RISK LEVEL</th>
                    <th>STATUS</th>
                </tr>
            </thead>
            <tbody>
                {% for channel in channel_data %}
                <input type="hidden" name="channel_id" value="{{ channel.channel_id }}"></input>
                <tr style="height: 10px;">
                    <td class="nr">{{ channel.channel_name }}</td>
                    <td>{{ channel.min_deposit }}</td>
                    <td>{{ channel.max_deposit }}</td>
                    <td>{{ channel.fee }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>{{ channel.status }}</td>
                    <td> <button id="edit-detail-btn" type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                            data-target="#edit_details">Edit</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="modal fade" id="edit_details" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Edit payment method</h4>
                    </div>
                    <div class="modal-body">

                        <form action="{% url 'xadmin:deposit_view' %}" method="POST">
                            {% csrf_token %}
                            <h4 id="channel_name"></h4>
                            <div id="deposit_channel_detail" class="bg_color">
                                <i class="fa fa-sign-in"></i><strong> DEPOSITS</strong>
                                <input type="hidden" name="type" value="getChannelInfo"></input>

                                <div class="form-group">
                                    <label>Status <div id="status"></div></label>
                                </div>

                                <div class="form-group">
                                    <label>MINIMUM DEPOSIT</label>
                                    <br>
                                    <input type=number min=0 step=0.01 id="min_deposit">
                                </div>
                                <div class="form-group">
                                    <label>MAXIMUM DEPOSIT</label>
                                    <br>
                                    <input type=number min=0 step=0.01 id="max_deposit">
                                </div>
                                <div class="form-group">
                                    <label>TRANSACTION FEE($)</label>
                                    <br>
                                    <input type=number min=0 step=0.01 id="transaction_fee">
                                </div>
                                <div class="form-group">
                                    <label>VOLUME(%)</label>
                                    <br>
                                    &#8806;<input style="width: 130px;" type=number min=0 step=0.01 id="volumn">&#37;
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Limit access</label>
                                <input type="radio" name="limit_access" id="limit_access_yes" /> Yes
                                <input type="radio" name="limit_access" id="limit_access_no" /> No
                            </div>

                            <div class="form-check" id="limit_access_detail">
                                <input type="checkbox" class="form-check-input" id="newUserCheck" checked>
                                <label class="form-check-label" for="newUserCheck">New users</label>

                                <div id="new_user_volume_info">
                                    NEW USERS VOLUME(%)
                                    <br>
                                    &#8806;<input style="width: 130px;" type=number min=0 step=0.01
                                        id="new_user_volumn">&#37;
                                </div>

                                <input type="checkbox" class="form-check-input" id="riskLevelCheck" checked>
                                <label class="form-check-label" for="riskLevelCheck">Risk levels</label>

                                <div id="risk_level_info">
                                    RISK LEVEL
                                    <select class="form-control" style="width: 100px">
                                        <option value="A">A</option>
                                        <option value="E1">E1</option>
                                        <option value="E2">E2</option>
                                        <option value="F">F</option>
                                    </select>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-danger">Delete channel</button><br>

                            <button type="submit" class="btn btn-primary">Save</button>
                            <button type="submit" class="btn btn-primary">Cancel</button>

                        </form>

                    </div>


                </div>
            </div>
        </div>
    </div>

</div> -->


<div class="panel panel-default">
    <div class="panel-heading">
        <h2 class="panel-title">
            Deposits
        </h2>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class='col-md-2' style="float: right">
                <div class='input-group date' id='deposit_time_to'>
                    <input type='text' class="form-control" placeholder="To" id='max' autocomplete="off" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
            <div class='col-md-2' style="float: right">
                <div class='input-group date' id='deposit_time_from'>
                    <input type='text' class="form-control" placeholder="From" id='min' autocomplete="off" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>

        </div>


        <div class="nav-bar" style="width:99%">
            <nav>
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item active">
                        <a class="nav-link" id="home-tab" data-toggle="tab" href="#pending" role="tab"
                            aria-controls="pending" aria-selected="true">PENDING</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#success" role="tab"
                            aria-controls="success" aria-selected="false">SUCCESS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#failed" role="tab"
                            aria-controls="failed" aria-selected="false">FAILED</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#cancelled" role="tab"
                            aria-controls="cancelled" aria-selected="false">CANCELLED</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="tab-content" id="myTabContent" style="padding-top: 3%">
            <div class="tab-pane fade in active" id="pending" role="tabpanel" aria-labelledby="home-tab">
                <table id="pending_table" class="table table-striped table-bordered hover" cellspacing="1">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">MEMBER ID</th>
                            <th scope="col">USERNAME</th>
                            <th scope="col">PAYMENT</th>
                            <th scope="col">TRANSACTION NO.</th>
                            <th scope="col">APPLICATION TIME</th>
                            <th scope="col">BANK</th>
                            <th scope="col">BRANCH</th>
                            <th scope="col">CITY</th>
                            <th scope="col">NAME</th>
                            <th scope="col">ACCOUNT</th>
                            <th scope="col">TRANSACTION CODE</th>
                            <th scope="col">APPLY AMOUNT</th>
                            <th scope="col">SLIP</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody id="pending_deposit_data">
                        {% for tran in pending_tran %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ tran.id }}</td>
                            <td>{{ tran.username }}</td>
                            <td>{{ tran.payment }}</td>
                            <td>{{ tran.tran_no }}</td>
                            <td>{{ tran.app_time|date:'d/m/y H:i:s' }}</td>
                            <td>{{ tran.bank }}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>{{ tran.amount }}</td>
                            <td></td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="success" role="tabpanel" aria-labelledby="profile-tab">
                <table id="success_deposit_table" class="table table-striped table-bordered hover">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">MEMBER ID</th>
                            <th scope="col">USERNAME</th>
                            <th scope="col">PAYMENT</th>
                            <th scope="col">TRANSACTION NO.</th>
                            <th scope="col">APPLICATION TIME</th>
                            <th scope="col">BANK</th>
                            <th scope="col">BRANCH</th>
                            <th scope="col">CITY</th>
                            <th scope="col">NAME</th>
                            <th scope="col">ACCOUNT</th>
                            <th scope="col">TRANSACTION CODE</th>
                            <th scope="col">APPLY AMOUNT</th>
                            <th scope="col">NOTE</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tran in success_tran %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ tran.id }}</td>
                            <td>{{ tran.username }}</td>
                            <td>{{ tran.payment }}</td>
                            <td>{{ tran.tran_no }}</td>
                            <td>{{ tran.app_time|date:'d/m/y H:i:s' }}</td>
                            <td>{{ tran.bank }}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>{{ tran.amount }}</td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="failed" role="tabpanel" aria-labelledby="profile-tab">
                <table id="fail_deposit_table" class="table table-striped table-bordered hover">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">MEMBER ID</th>
                            <th scope="col">USERNAME</th>
                            <th scope="col">PAYMENT</th>
                            <th scope="col">TRANSACTION NO.</th>
                            <th scope="col">APPLICATION TIME</th>
                            <th scope="col">ARRIVING TIME</th>
                            <th scope="col">BANK</th>
                            <th scope="col">BRANCH</th>
                            <th scope="col">CITY</th>
                            <th scope="col">NAME</th>
                            <th scope="col">ACCOUNT</th>
                            <th scope="col">TRANSACTION CODE</th>
                            <th scope="col">APPLY AMOUNT</th>
                            <th scope="col">NOTE</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tran in fail_tran %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ tran.id }}</td>
                            <td>{{ tran.username }}</td>
                            <td>{{ tran.payment }}</td>
                            <td>{{ tran.tran_no }}</td>
                            <td>{{ tran.app_time|date:'d/m/y H:i:s' }}</td>
                            <td>{{ tran.arr_time }}</td>
                            <td>{{ tran.bank }}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>{{ tran.amount }}</td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="cancelled" role="tabpanel" aria-labelledby="contact-tab">
                <table id="cancelled_deposit_table" class="table table-striped table-bordered hover">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">MEMBER ID</th>
                            <th scope="col">USERNAME</th>
                            <th scope="col">PAYMENT</th>
                            <th scope="col">TRANSACTION NO.</th>
                            <th scope="col">APPLICATION TIME</th>
                            <th scope="col">BANK</th>
                            <th scope="col">BRANCH</th>
                            <th scope="col">CITY</th>
                            <th scope="col">NAME</th>
                            <th scope="col">ACCOUNT</th>
                            <th scope="col">TRANSACTION CODE</th>
                            <th scope="col">APPLY AMOUNT</th>
                            <th scope="col">NOTE</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tran in cancelled_tran %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ tran.id }}</td>
                            <td>{{ tran.username }}</td>
                            <td>{{ tran.payment }}</td>
                            <td>{{ tran.tran_no }}</td>
                            <td>{{ tran.app_time|date:'d/m/y H:i:s' }}</td>
                            <td>{{ tran.bank }}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>{{ tran.amount }}</td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- audit popup window -->
    <div class="modal fade" id="audit_deposit" role="dialog">
        <div id="deposit_request_pop" class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    Deposit request details
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">TRANSACTION DETAILS</div>
                        <div class="col-md-4">BANK DETAILS</div>
                        <div class="col-md-4">MEMBER DETAILS</div>
                    </div>
                    <div class="row">
                        <div class="col-md-2 bg_color">
                            <p><strong>Deposit Slip</strong></p>
                            <p><strong>Transaction No</strong></p>
                            <p><strong>Application Time</strong></p>
                            <p><strong>Transaction Code</strong></p>
                            <p><strong>Amount</strong></p>
                        </div>
                        <div class="col-md-2 bg_color" id="deposit_detail">
                        </div>
                        <div class="col-md-2 bg_color">
                            <p><strong>Bank</strong></p>
                            <p><strong>Branch</strong></p>
                            <p><strong>City</strong></p>
                            <p><strong>Account Name</strong></p>
                            <p><strong>Account No.</strong></p>
                        </div>
                        <div class="col-md-2 bg_color" id="bank_detail">
                        </div>
                        <div class="col-md-1 bg_color">
                            <p><strong>Member ID</strong></p>
                            <p><strong>Username</strong></p>
                            <p><strong>First Name</strong></p>
                            <p><strong>Last Name</strong></p>
                        </div>
                        <div class="col-md-1 bg_color" id="member_detail1">
                        </div>
                        <div class="col-md-1 bg_color">
                            <p><strong>VIP Level</strong></p>
                            <p><strong>Risk Level</strong></p>
                            <p><strong>Balance</strong></p>
                        </div>
                        <div class="col-md-1 bg_color" id="member_detail2">
                        </div>
                    </div>

                    <!-- latest deposits -->
                    <div class="row" style="margin-top: 20px;">
                        <p><strong>LATEST DEPOSITS</strong></p>
                    </div>
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">PAYMENT</th>
                                <th scope="col">TRANSACTION NO.</th>
                                <th scope="col">TIME OF APPLICATION</th>
                                <th scope="col">BANK</th>
                                <th scope="col">BRANCH</th>
                                <th scope="col">CITY</th>
                                <th scope="col">NAME</th>
                                <th scope="col">ACCOUNT</th>
                                <th scope="col">TRANSACTION CODE</th>
                                <th scope="col">APPLY AMOUNT</th>
                                <th scope="col">SLIP</th>
                            </tr>
                        </thead>
                        <tbody id=latest_deposits>
                            <!-- <tr id = latest_deposits>
                                <td></td>
                            </tr> -->
                        </tbody>
                    </table>

                    <!-- notes -->
                    <form action="{% url 'xadmin:deposit_view' %}" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="type" value="audit_deposit"></input>
                        <div class="form-group">
                            <label for="deposit_notes">NOTES</label>
                            <input type='deposit_notes' id='notes' class="form-control" name="deposit_notes"
                                style="width: 40%;height: 100px;" placeholder="Add anything of importance">
                        </div>
                        <div id="deposit_request_button">
                            <button type="submit" class="btn btn-success">Approve</button>
                            <button type="submit" class="btn btn-success">Approve and Next</button>
                            <button type="button" class="btn btn-danger">Reject</button>
                            <button type="button" class="btn btn-danger">Reject and Next</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



<script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

<!-- datatables -->
<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css"> -->
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
<!-- datepicker -->

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css" rel="stylesheet"
    type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" rel="stylesheet" type="text/css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<script>
    $(document).ready(function () {
        var csrftoken = $.cookie("csrftoken")

        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });


        var table = $('#pending_table').DataTable({
            responsive: true,
            // "scrollY": 200,
            "scrollX": true,
            "aoColumns": [{
                "mData": 0
            }, {
                "sWidth": "10%",
                "mData": 1
            }, {
                "sWidth": "10%",
                "mData": 2
            }, {
                "sWidth": "10%",
                "mData": 3
            }, {
                "sWidth": "10%",
                "mData": 4
            }, {
                "sWidth": "10%",
                "mData": 5
            }, {
                "sWidth": "10%",
                "mData": 6
            }, {
                "sWidth": "8%",
                "mData": 7
            }, {
                "sWidth": "9%",
                "mData": 8
            }, {
                "sWidth": "8%",
                "mData": 9
            }, {
                "sWidth": "10%",
                "mData": 10
            }, {
                "sWidth": "10%",
                "mData": 11
            }, {
                "sWidth": "10%",
                "mData": 12
            }, {
                "sWidth": "10%",
                "mData": 13
            }, {
                "mData": null,
                "bSortable": false,
                "mRender": function (data, type, full) {
                    return '<button id="edit-pending-detail-btn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#audit_deposit">Audit</button>'
                }
            }],
            "columnDefs": [{
                "searchable": false, "targets": [0, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14],
            }],
            language: {
                searchPlaceholder: " Enter member ID, username or transaction number"
            },
            "dom": '<f<t>ipl>'
        });

        // deposit success table
        var success_table = $('#success_deposit_table, #fail_deposit_table, #cancelled_deposit_table').DataTable({
            responsive: true,
            // "scrollY": 200,
            "scrollX": true,
            "columnDefs": [{
                "searchable": false, "targets": [0, 3, 6, 7, 8, 9, 10, 11, 12, 13],
            }],
            language: {
                searchPlaceholder: " Enter member ID, username or transaction number"
            },
            "dom": '<f<t>ipl>'
        });

        // date search
        $.fn.dataTable.ext.search.push(
            function (settings, data, dataIndex) {
                var min = $('#min').datepicker("getDate");
                var max = $('#max').datepicker("getDate");
                var startDate = new Date(data[5]);
                if (min == null && max == null) { return true; }
                if (min == null && startDate <= max) { return true; }
                if (max == null && startDate >= min) { return true; }
                if (startDate <= max && startDate >= min) { return true; }
                return false;
            }
        );

        $("#min").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });
        $("#max").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });

        // Event listener to the two range filtering inputs to redraw on input
        $('#min, #max').change(function () {
            table.draw();
        });

        // // deposit channel edit function
        // $('#edit-detail-btn').click(function () {
        //     var channel = $(this).closest("tbody").find("input[name='channel_id']").val()
        //     // $(this).closest("tr")
        //     //     .find(".nr")
        //     //     .text();
        //     console.log("sjkdhlsd" + channel)
        //     $.ajax({
        //         type: 'GET',
        //         url: "{% url 'xadmin:deposit_view' %}",
        //         data: {
        //             'type': 'getChannelInfo',
        //             'current_deposit_channel': channel,
        //         },
        //         success: function (data) {
        //             console.log(data['name']);
        //             // renderDepositChannel(data);
        //             $('#channel_name').html(data['name'])
        //             $('#status').html(data['status'])
        //             $('#min_deposit').val(data['min_deposit'])
        //             $('#max_deposit').val(data['max_deposit'])
        //             $('#transaction_fee').val(data['transaction_fee'])
        //             $('#volumn').val(data['volumn'])
        //             console.log(data['limit_access'])
        //             if (data['limit_access'] == true) {
        //                 $('#' + 'limit_access_yes').prop('checked', true);
        //             } else {
        //                 $('#' + 'limit_access_no').prop('checked', true);
        //                 $('#limit_access_detail').hide();
        //             }

        //             $('#limit_access_yes').click(function () {
        //                 $("#limit_access_detail").show();

        //             });

        //             $('#limit_access_no').click(function () {
        //                 $("#limit_access_detail").hide();
        //             });

        //             $('#newUserCheck').click(function () {
        //                 if (this.checked) {
        //                     $('#new_user_volume_info').show();
        //                 } else {
        //                     $('#new_user_volume_info').hide();
        //                 }
        //             });

        //             $('#riskLevelCheck').click(function () {
        //                 if (this.checked) {
        //                     $('#risk_level_info').show();
        //                 } else {
        //                     $('#risk_level_info').hide();
        //                 }
        //             });
        //         }
        //     })
        // });


        $('#pending_table tbody').on('click', 'button', function () {
            var data = table.row($(this).parents('tr')).data();
            showDepositeDetail(data);
            showBankDetail(data);
            var user_id = data[1];
            $.when(
                $.ajax({
                    type: 'GET',
                    url: "{% url 'xadmin:deposit_view' %}",
                    data: {
                        'type': 'getMemberInfo',
                        'user': user_id,
                    },
                }),
                $.ajax({
                    type: 'GET',
                    url: "{% url 'xadmin:deposit_view' %}",
                    data: {
                        'type': 'getLatestDeposit',
                        'user': user_id,
                    },
                })
            ).then(function (data1, data2) {
                addMemberDetails(data1);
                addDepositRecord(data2);
            });
        });


        function addMemberDetails(data) {
            $("#member_detail1").empty();
            var content = "";
            console.log(data);
            content += "<p>" + data[0].id + "</p>";
            content += "<p>" + data[0].username + "</p>";
            content += "<p>" + data[0].first_name + "</p>";
            content += "<p>" + data[0].last_name + "</p>";
            $("#member_detail1").append(content);

            $("#member_detail2").empty();
            var content2 = "";
            content2 += "<p>.....</p>";
            content2 += "<p>.....</p>";
            content2 += "<p>" + data[0].balance + "</p>";
            $("#member_detail2").append(content2);
        }
        function addDepositRecord(data) {
            $("#latest_deposits").empty();
            content = "";
            for (var i = 0; i < data[0].length; i++) {
                content += '<tr>'
                content += '<td>' + (i + 1) + '</td>';
                content += '<td>' + data[0][i].payment + '</td>';
                content += '<td>' + data[0][i].tran_no + '</td>';
                content += '<td>' + data[0][i].time_app + '' + '</td>';
                content += '<td>' + data[0][i].bank + '</td>';
                content += '<td>' + data[0][i].branch + '</td>';
                content += '<td>' + data[0][i].city + '</td>';
                content += '<td>' + data[0][i].name + '</td>';
                content += '<td>' + data[0][i].account + '</td>';
                content += '<td>' + data[0][i].tran_code + '</td>';
                content += '<td>' + data[0][i].amount + '</td>';
                content += '<td>' + data[0][i].status + '</td>';
                content += '</tr>'
            }
            $("#latest_deposits").append(content);
        }

        showDepositeDetail = function (data) {
            $("#deposit_detail").empty();
            var content = "";
            content += "<p>...</p>";
            content += "<p>" + data[4] + "</p>";
            content += "<p>" + data[5] + "</p>";
            content += "<p>...</p>";
            content += "<p>" + data[12] + "</p>";
            $("#deposit_detail").append(content);
        }

        showBankDetail = function (data) {
            $("#bank_detail").empty();
            var content = "";
            content += "<p>" + data[6] + "</p>";
            content += "<p>" + data[7] + "</p>";
            content += "<p>" + data[8] + "</p>";
            content += "<p>" + data[9] + "</p>";
            content += "<p>" + data[10] + "</p>";
            $("#bank_detail").append(content);
        }

        getMemberInfo = function (data) {
            console.log("aaa" + data)
        }


    })
</script>

{% endblock %}